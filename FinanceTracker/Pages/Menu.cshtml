@page
@model FinanceTracker.Pages.MenuModel

<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/styles/style.css"/>
    <title>Menu</title>
</head>
<body>
<h1 style="text-align: center;">Menu</h1>

<div style="text-align: center;">
    <a href="/AdicionarDeposito" class="btn-primary">Adicionar Depósito a Prazo</a>
    <br><br>
        
    <a href="/AdicionarFundo" class="btn-primary">Adicionar Fundo de Investimento</a>
    <br><br>
        
    <a href="/AdicionarImovel" class="btn-primary">Adicionar Imóvel Arrendado</a>
    <br><br>
        
    <a href="#" id="listarAtivosLink" class="btn btn-primary mb-3">Listar Ativos</a>
    <br><br>
        
    <a href="/Login" class="btn-secondary">Logout</a>
</div>
</body>
</html>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        console.log("Script de Menu iniciado.");
        const userId = localStorage.getItem("userId");
        console.log("UserId do localStorage em Menu:", userId);
        const listarAtivosLink = document.getElementById("listarAtivosLink");

        if (userId) {
            listarAtivosLink.href = "/Listar_Ativos?userId=" + encodeURIComponent(userId);
            console.log("Link de Listar Ativos atualizado:", listarAtivosLink.href);
            listarAtivosLink.addEventListener("click", function (e) {
                console.log("Link Listar Ativos clicado, navegando para:", listarAtivosLink.href);
            });
        } else {
            console.log("Erro: userId não encontrado no localStorage em Menu.");
            listarAtivosLink.addEventListener("click", function (e) {
                e.preventDefault();
                console.log("Link clicado, mas userId ausente. Redirecionando para /Login.");
                alert("Erro: Utilizador não autenticado. Por favor, volte a fazer login.");
                window.location.href = "/Login";
            });
        }
    });
</script>